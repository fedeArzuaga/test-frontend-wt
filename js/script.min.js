import{dptosLocs}from"./modules/datos.js";import{validarCedula}from"./modules/logica.js";const departamentField=document.querySelector("#departament");departamentField.addEventListener("change",focus);const form=document.querySelector("#contact-form");form.addEventListener("submit",e=>{e.preventDefault();const a=[e.target.name,e.target.surname,e.target.email,e.target.departament,e.target.location,e.target.ci,e.target.terms];e.target.name.value,e.target.surname.value,e.target.email.value,e.target.departament.value,e.target.location.value,e.target.ci.value,e.target.terms.checked;a.forEach(e=>{resetInput(e),e.addEventListener("focus",resetInputOnEvent),validateInput(e)}),success.allFieldsValidate&&(document.querySelector(".fake-popup").classList.add("fake-popup--open"),setTimeout(()=>{document.querySelector(".fake-popup").classList.remove("fake-popup--open")},3e3))});let success={name:!1,surname:!1,email:!1,departament:!1,location:!1,ci:!1,terms:!1,allFieldsValidate:!1};function validateInput(e){if(""===e.value?(sendErrorMessage(e,"El campo no puede quedar en blanco."),"departament"===e.name?success.departament=!1:"location"==e.name?success.location=!1:"ci"==e.name&&(success.ci=!1)):"departament"===e.name?success.departament=!0:"location"==e.name?success.location=!0:"ci"==e.name&&(success.ci=!0),"name"!==e.name&&"surname"!==e.name||(""!=e.value&&e.value.length<2?(sendErrorMessage(e,"Este campo no puede contener menos de 2 caracteres"),"name"===e.name?success.name=!1:"surname"==e.name&&(success.surname=!1)):"name"===e.name?success.name=!0:"surname"==e.name&&(success.surname=!0)),"email"===e.name){const a=/^(([^<>()\[\]\\.,;:\s@”]+(\.[^<>()\[\]\\.,;:\s@”]+)*)|(“.+”))@((\[[0–9]{1,3}\.[0–9]{1,3}\.[0–9]{1,3}\.[0–9]{1,3}])|(([a-zA-Z\-0–9]+\.)+[a-zA-Z]{2,}))$/;""==e.value||a.test(e.value)?success.email=!0:(sendErrorMessage(e,"Por favor, ingrese un e-mail válido."),success.email=!1)}if("ci"===e.name){validarCedula(e.value)?success.ci=!0:(sendErrorMessage(e,"Por favor, ingrese una Cédula de Identidad (C.I.) válida."),success.ci=!1)}"terms"===e.name&&(e.checked||sendErrorMessage(e,"Debe aceptar las bases y condiciones antes de enviar el formulario"),success.terms=e.checked),!0===success.name&&!0===success.surname&&!0===success.email&&!0===success.departament&&!0===success.location&&!0===success.ci&&!0===success.terms?success.allFieldsValidate=!0:success.allFieldsValidate=!1}function resetInputOnEvent(e){const a=e.target.id;!!document.querySelector(`.form-control.${a} .form__error`)&&(e.target.style.borderColor="#aaa",document.querySelector(`.form-control.${a} .form__error`).remove())}function resetInput(e){const a=e.id;!!document.querySelector(`.form-control.${a} .form__error`)&&(e.style.borderColor="#aaa",document.querySelector(`.form-control.${a} .form__error`).remove())}function focus(e){let a=document.querySelector("#location");for(const t in dptosLocs)if(e.target.value===t){let e=0;dptosLocs[t].forEach(t=>{e<1?(a.innerHTML=`<option value="${t}">${t}</option>`,e++):a.innerHTML+=`<option value="${t}">${t}</option>`})}else""===e.target.value&&(a.innerHTML="")}function sendSuccessMessage(e,a){e.style.borderColor="red";let t=document.createElement("div");t.classList.add("form__error"),t.textContent=a,e.parentElement.appendChild(t)}function sendErrorMessage(e,a){e.style.borderColor="red";let t=document.createElement("div");t.classList.add("form__error"),t.textContent=a,e.parentElement.appendChild(t)}